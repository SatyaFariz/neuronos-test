import{h as m,s as g}from"./helpers.c6bbd511.js";let t=!1;chrome.runtime.onConnect.addListener(e=>{e.name==="popup"&&(t=!0,e.onDisconnect.addListener(()=>{t=!1}))});chrome.alarms.create("checkMessages",{periodInMinutes:1});chrome.alarms.onAlarm.addListener(e=>{e.name==="checkMessages"&&chrome.storage.local.get("messages",async i=>{const s=i.messages||[],n="/messages";try{const o=await m(s.length===0?n:`${n}?incrementId_gt=${s[0].incrementId}`);t&&o.find(a=>a.priority==="high")&&chrome.runtime.sendMessage({action:"playNotificationSound"});const c=[...o,...s],r=c.filter(a=>!a.read).length;g(r),chrome.storage.local.set({messages:c})}catch{}})});
